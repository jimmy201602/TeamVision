webpackJsonp([12],{"1ElI":function(t,e){},"2Hcw":function(t,e,a){"use strict";var s=a("Dd8w"),i=a.n(s),o=(a("IcnI"),a("NYxO")),n=a("24FE"),c={name:"ciTask",data:function(){return{myCITask:{count:0,next:"",items:[]}}},computed:i()({},Object(o.c)("citask",["ciTaskSearchKey","ciTaskAdded"]),Object(o.c)(["appBodyHeight","userInfo"]),{containerHeight:function(){return this.appBodyHeight-10},ciTaskCount:function(){return this.myCITask.count},myCITaskList:function(){return""===this.ciTaskSearchKey?this.initCITaskStatus():this.filterCITask(this.ciTaskSearchKey),this.ciTaskAdded&&(this.loadCITaskList(),this.setCITaskAdded(!1)),this.myCITask}}),methods:i()({},Object(o.d)("citask",["setCITaskAdded"]),{loadCITaskList:function(){var t=this;this.$axios.get("/api/ci/task/my?page_size=10000").then(function(e){t.myCITask.count=e.data.result.count,t.myCITask.next=e.data.result.next,t.myCITask.items=e.data.result.results,t.$Spin.hide()},function(e){t.$Spin.hide()})},filterCITask:function(t){this.initCITaskStatus();for(var e=0;e<this.myCITask.items.length;e++){var a=this.myCITask.items[e];a.TaskName.toUpperCase().indexOf(t.toUpperCase())<0&&(a.Display=!1,this.myCITask.count--)}},initCITaskStatus:function(){this.myCITask.count=this.myCITask.items.length;for(var t=0;t<this.myCITask.items.length;t++){this.myCITask.items[t].Display=!0}}}),mounted:function(){0===this.ciTaskCount&&this.$Spin.show()},created:function(){this.loadCITaskList()},watch:{ciTaskCount:function(){0!==this.ciTaskCount&&this.$Spin.hide()}},components:{ciTaskItem:n.a}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{style:"height:"+this.containerHeight+"px; overflow-y:scroll;"},this._l(this.myCITaskList.items,function(t){return e("ci-task-item",{key:t.id,attrs:{item:t}})}))},staticRenderFns:[]};var r=a("VU/8")(c,l,!1,function(t){a("Lymw")},"data-v-7e1c0892",null);e.a=r.exports},"6UI5":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),i=a.n(s),o=(a("IcnI"),a("NYxO")),n=a("ufU/"),c=a("bbZS"),l=a("2Hcw"),r=a("utqv"),d=a("p1Js"),u=a("sHXF"),p={name:"ciTaskContainer",props:["menuItem","flowID"],data:function(){return{toDoSummary:{taskCount:0,issueCount:0,fortestingCount:0},activeProject:[],activity:{next:"",data:[],count:0}}},computed:i()({},Object(o.c)(["appBodyHeight"]),{taskContainerHeight:function(){return this.appBodyHeight-33},agentContainerHeight:function(){return this.appBodyHeight-33}}),components:{CITaskFlowCreateDialog:u.a,CITaskCreateDialog:d.a,ciAgent:c.a,ciTaskFlow:n.a,ciTask:l.a,ciTaskFlowItem:r.default}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ci-task-container"},[e("Row",{attrs:{gutter:16}},[e("Col",{attrs:{lg:16,md:16,sm:12,xs:24}},[e("div",[e("ci-task-flow"),this._v(" "),""!==this.flowID?e("ci-task-flow-item",{attrs:{taskFlowID:this.flowID}}):this._e()],1)]),this._v(" "),e("Col",{style:"height:"+this.agentContainerHeight+"px; overflow-y:scroll;",attrs:{lg:8,md:8,sm:12,xs:0}},[e("div",[e("ci-agent")],1)])],1),this._v(" "),e("c-i-task-flow-create-dialog")],1)},staticRenderFns:[]};var h=a("VU/8")(p,f,!1,function(t){a("XnVu")},"data-v-58ed0619",null);e.default=h.exports},"D+5m":function(t,e){},Lymw:function(t,e){},OxLp:function(t,e){},XnVu:function(t,e){},bbZS:function(t,e,a){"use strict";var s=a("Dd8w"),i=a.n(s),o=(a("IcnI"),a("K/ko")),n=a("NYxO"),c={name:"ciAgent",data:function(){return{taskQueue:[],agents:[],taskID:0,taskUUID:"",tqID:0}},computed:i()({},Object(n.c)("citask",["ciLogDialogShow"])),methods:i()({},Object(n.d)("citask",["setCILogDialogShow"]),{cancleTask:function(t,e){var a=this;this.$axios.get("/api/ci/task/"+t+"/stop/?TaskUUID="+e).then(function(t){a.$Message.success({content:t.data.result.message,duration:10})},function(t){a.$Message.error({content:t.data.result.message,duration:10})})},showCILog:function(t,e,a){this.taskID=t,this.taskUUID=e,this.tqID=a,console.log(this.tqID),this.setCILogDialogShow(!0)},loadTaskQueue:function(){var t=this;this.$axios.get("/api/common/task_queues?Status__in=1,2,3&Command=1&TaskType__in=1,2,3,4,5").then(function(e){t.taskQueue=e.data.result},function(t){}),this.recivedTaskEnqueue=!1},loadAgent:function(){var t=this;this.$axios.get("/api/common/agents").then(function(e){console.log(e),t.agents=e.data.result},function(t){})},onReciveTaskStatusChange:function(){var t=this,e=new WebSocket("ws://"+window.location.host+"/ws/TASKSTATUSCHANGE?subscribe-broadcast&publish-broadcast&echo");e.onopen=function(){console.log("task enqueue websocket connected")},e.onmessage=function(e){"--heartbeat--"!==e.data&&(setTimeout(t.loadTaskQueue,1e4),setTimeout(t.loadAgent,1e4))},e.onerror=function(t){console.error(t)},e.onclose=function(t){console.log("connection closed")}}}),created:function(){this.loadTaskQueue(),this.loadAgent(),this.onReciveTaskStatusChange()},components:{CILogShowDialog:o.a}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",{staticStyle:{"margin-top":"10px"},attrs:{"dis-hover":"",bordered:!1}},[a("div",{staticClass:"citask-card-title"},[a("Icon",{attrs:{type:"ios-list-box-outline"}}),t._v(" 任务队列")],1),t._v(" "),a("div",t._l(t.taskQueue,function(e){return a("div",{key:e.TaskUUID,staticStyle:{height:"40px","border-bottom":"1px solid #f5f7f9","padding-top":"12px"}},[a("span",{staticStyle:{width:"70%",display:"inline-block","text-align":"left","padding-left":"10px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("Icon",{attrs:{type:"ios-clock-outline"}}),t._v(" "+t._s(e.TaskName))],1),t._v(" "),a("span",{staticStyle:{width:"20%",display:"inline-block"}},[t._v(t._s(e.TriggerName))]),t._v(" "),a("Tooltip",{staticStyle:{width:"10%"},attrs:{content:"取消任务"}},[a("span",{staticClass:"cursor-hand",staticStyle:{width:"20%",display:"inline-block"},on:{click:function(a){t.cancleTask(e.TaskID,e.TaskUUID)}}},[a("Icon",{staticStyle:{"padding-right":"5px"},attrs:{type:"md-close",size:18}})],1)])],1)}))]),t._v(" "),a("Card",{staticStyle:{"margin-top":"10px"},attrs:{"dis-hover":"",bordered:!1}},[a("div",{staticClass:"citask-card-title"},[a("span",[a("Icon",{attrs:{type:"md-laptop"}}),t._v(" Agent")],1),t._v(" "),a("span",{staticStyle:{"margin-left":"20px"}},[a("span",[a("Icon",{attrs:{type:"ios-ionic"}}),t._v(" 离线")],1),t._v(" "),a("span",{staticStyle:{"margin-left":"20px",color:"#388e8e"}},[a("Icon",{attrs:{type:"ios-ionic"}}),t._v(" 在线")],1)])]),t._v(" "),a("div",[t._l(t.agents,function(e){return e.RunningTasks.length>0?a("div",{key:e.id,staticStyle:{"border-bottom":"1px solid #f5f7f9","padding-top":"12px"}},[a("div",{staticStyle:{"text-align":"left"}},[a("span",{staticStyle:{"padding-left":"10px","padding-right":"5px"}},[2===e.Status?a("Icon",{staticStyle:{color:"#388e8e"},attrs:{type:"md-checkmark-circle-outline",size:14}}):t._e(),t._v(" "),2!==e.Status?a("Icon",{attrs:{type:"ios-checkmark-circle-outline",size:14}}):t._e()],1),t._v(" "),a("span",{staticStyle:{"padding-right":"5px"}},[t._v(t._s(e.Name))])]),t._v(" "),t._l(e.RunningTasks,function(e){return a("div",{staticStyle:{"padding-left":"20px","padding-top":"10px"}},[a("span",{staticStyle:{width:"60%",display:"inline-block","text-align":"left","padding-left":"10px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[a("span",{staticStyle:{display:"block"}},[t._v(t._s(e.TaskName))]),t._v(" "),a("Progress",{attrs:{percent:e.Process,"stroke-width":5,status:"success","hide-info":!0}})],1),t._v(" "),a("Tooltip",{staticStyle:{width:"15%"},attrs:{content:"触发着"}},[a("span",{staticStyle:{width:"100%",display:"inline-block"}},[t._v(t._s(e.TriggerName))])]),t._v(" "),a("Tooltip",{staticStyle:{width:"15%"},attrs:{content:"点击查看日志"}},[a("span",{staticClass:"cursor-hand",staticStyle:{width:"100%",display:"inline-block","text-decoration":"underline"},on:{click:function(a){t.showCILog(e.TaskID,e.TaskUUID,e.TQID)}}},[t._v("实时日志 ")])]),t._v(" "),a("Tooltip",{staticStyle:{width:"10%"},attrs:{content:"取消任务"}},[a("span",{staticClass:"cursor-hand",staticStyle:{width:"100%",display:"inline-block"},on:{click:function(a){t.cancleTask(e.TaskID,e.TaskUUID)}}},[a("Icon",{staticStyle:{"padding-right":"5px"},attrs:{type:"md-close",size:18}})],1)])],1)})],2):t._e()}),t._v(" "),t._l(t.agents,function(e){return 0===e.RunningTasks.length?a("div",{key:e.id,staticStyle:{"border-bottom":"1px solid #f5f7f9","padding-top":"12px"}},[a("div",{staticStyle:{"text-align":"left"}},[a("span",{staticStyle:{"padding-left":"10px","padding-right":"5px"}},[2===e.Status?a("Icon",{staticStyle:{color:"#388e8e"},attrs:{type:"md-checkmark-circle-outline",size:14}}):t._e(),t._v(" "),2!==e.Status?a("Icon",{attrs:{type:"ios-checkmark-circle-outline",size:14}}):t._e()],1),t._v(" "),a("span",{staticStyle:{"padding-right":"5px"}},[t._v(t._s(e.Name))])]),t._v(" "),t._l(e.RunningTasks,function(e){return a("div",{staticStyle:{"padding-left":"20px","padding-top":"10px"}},[a("span",{staticStyle:{width:"60%",display:"inline-block","text-align":"left","padding-left":"10px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v("\n               "+t._s(e.TaskName))]),t._v(" "),a("span",{staticClass:"cursor-hand",staticStyle:{width:"20%",display:"inline-block"},on:{click:function(a){t.showCILog(e.TaskID,e.TaskUUID,e.TQID)}}},[t._v("日志")])])})],2):t._e()})],2)]),t._v(" "),a("c-i-log-show-dialog",{attrs:{taskID:t.taskID,taskUUID:t.taskUUID,tqID:t.tqID}})],1)},staticRenderFns:[]};var r=a("VU/8")(c,l,!1,function(t){a("D+5m")},"data-v-7e650e56",null);e.a=r.exports},p1Js:function(t,e,a){"use strict";var s=a("Dd8w"),i=a.n(s),o=a("NYxO"),n=a("SriR"),c=a("h/Zt"),l={name:"CITaskCreateDialog",data:function(){return{projects:[],ciTaskList:[],showTaskList:!0,formItem:{CopyTaskID:0,TaskName:"",Project:0,TaskType:0,HistoryCleanStrategy:10},ruleCustom:i()({},n.a)}},computed:i()({},Object(o.c)("ciglobal",["ciNewObject"]),Object(o.c)(["appBodyHeight"]),{containerHeight:function(){return this.appBodyHeight-100}}),methods:i()({},Object(o.d)("citask",["setCITaskCreateDialogShow","setCITaskAdded"]),Object(o.d)("ciglobal",["setCINewObject"]),{addCITask:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.setCINewObject(!1),e.$axios.post("/api/ci/task/list",e.formItem).then(function(t){e.setCITaskAdded(!0)},function(t){e.setCINewObject(!1),e.$Message.error({content:"创建任务失败，请联系管理员或者重试",duration:10})}))})},cancel:function(){this.setCINewObject(!1)},onTaskTypeChange:function(t){this.showTaskList=0===t},onProjectChange:function(){console.log(this.formItem)},loadMyProject:function(){var t=this;this.$axios.get("/api/project/list?extinfo=0&home=1").then(function(e){t.projects=e.data.result},function(t){})},loadMyCITasks:function(){var t=this;this.$axios.get("/api/ci/task/my?page_size=10000").then(function(e){t.ciTaskList=e.data.result.results},function(t){})}}),created:function(){this.loadMyProject(),this.loadMyCITasks()},mounted:function(){},watch:{},components:{FormItem:c.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{value:t.ciNewObject,title:"添加新任务",width:600,styles:{bottom:"20px",top:"50px"}},on:{"on-cancel":t.cancel}},[a("div",{staticStyle:{height:"400px","overflow-y":"scroll","overflow-x":"hidden"}},[a("Form",{ref:"ciTaskCreate",attrs:{model:t.formItem,"label-width":80,rules:t.ruleCustom}},[a("FormItem",{attrs:{label:"项目",prop:"Project"}},[a("Select",{attrs:{placeholder:"请选择项目"},on:{"on-change":t.onProjectChange},model:{value:t.formItem.Project,callback:function(e){t.$set(t.formItem,"Project",e)},expression:"formItem.Project"}},t._l(t.projects,function(e){return a("Option",{key:e.id,attrs:{value:e.id,label:e.PBTitle}},[a("span",{staticStyle:{"margin-right":"10px"}},[a("Avatar",{attrs:{src:e.PBAvatar}})],1),t._v(" "),a("span",[t._v(t._s(e.PBTitle))])])}))],1),t._v(" "),a("FormItem",{attrs:{label:"标题",prop:"TaskName"}},[a("Input",{attrs:{placeholder:"任务名称50个字符以内！"},model:{value:t.formItem.TaskName,callback:function(e){t.$set(t.formItem,"TaskName",e)},expression:"formItem.TaskName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"构建记录保留个数",prop:"HistoryCleanStrategy"}},[a("Input",{attrs:{placeholder:"默认10个"},model:{value:t.formItem.HistoryCleanStrategy,callback:function(e){t.$set(t.formItem,"HistoryCleanStrategy",e)},expression:"formItem.HistoryCleanStrategy"}})],1),t._v(" "),a("FormItem",{attrs:{label:"任务类型",prop:"TaskType"}},[a("Select",{attrs:{filterable:!0,placeholder:"任务类型"},on:{"on-change":t.onTaskTypeChange},model:{value:t.formItem.TaskType,callback:function(e){t.$set(t.formItem,"TaskType",e)},expression:"formItem.TaskType"}},[a("Option",{key:0,attrs:{value:0}},[t._v("复制任务")]),t._v(" "),a("Option",{key:4,attrs:{value:4}},[t._v("构建")]),t._v(" "),a("Option",{key:1,attrs:{value:1}},[t._v("测试")])],1)],1),t._v(" "),t.showTaskList?a("FormItem",{attrs:{label:"任务列表",prop:"CopyTaskID"}},[a("Select",{attrs:{filterable:!0,placeholder:"复制任务列表"},model:{value:t.formItem.CopyTaskID,callback:function(e){t.$set(t.formItem,"CopyTaskID",e)},expression:"formItem.CopyTaskID"}},t._l(t.ciTaskList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.TaskName))])}))],1):t._e()],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.ciNewObject?a("Button",{staticStyle:{width:"80px",height:"30px"},attrs:{type:"success",shape:"circle"},on:{click:function(e){t.addCITask("ciTaskCreate")}}},[t._v("添加")]):t._e()],1)])},staticRenderFns:[]};var d=a("VU/8")(l,r,!1,function(t){a("r8W3")},"data-v-1f8a58d9",null);e.a=d.exports},r8W3:function(t,e){},sHXF:function(t,e,a){"use strict";var s=a("Dd8w"),i=a.n(s),o=a("NYxO"),n={Project:[{type:"integer",required:!0,message:"请选择项目或者创建项目后再创建任务流！"}],FlowName:[{type:"string",required:!0,min:1,max:50,message:"标题长度必须在1-50个字符之间！",trigger:"blur"}],Description:[{type:"string",required:!1,max:50,message:"描述信息长度不超过200个字符！",trigger:"blur"}]},c=a("h/Zt"),l={name:"CITaskFlowCreateDialog",data:function(){return{projects:[],ciTaskTransfer:{ciTasks:[],targetKeys:[],titles:["我的任务","添加的任务"],listStyle:{height:"249px"}},formItem:{FlowName:"",Project:0,CITasks:[]},ruleCustom:i()({},n)}},computed:i()({},Object(o.c)("ciglobal",["ciNewObject"]),Object(o.c)(["appBodyHeight"]),{containerHeight:function(){return this.appBodyHeight-100}}),methods:i()({},Object(o.d)("citaskflow",["setCITaskFlowAdded"]),Object(o.d)("ciglobal",["setCINewObject"]),{addCITaskFlow:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$axios.post("/api/ci/task_flow/list",e.formItem).then(function(t){e.setCINewObject(!1),e.setCITaskFlowAdded(!0)},function(t){e.setCINewObject(!1),e.$Message.error({content:"创建任务流失败，请联系管理员或者重试",duration:10})})})},cancel:function(){this.setCINewObject(!1)},transferRender:function(t){return t.label},moveCITasks:function(t){this.ciTaskTransfer.targetKeys=t,this.formItem.CITasks=t,console.log(this.formItem)},transferFilterMethod:function(t,e){return t.label.toUpperCase().indexOf(e.toUpperCase())>-1},loadMyCITasks:function(){var t=this;this.$axios.get("/api/ci/task_basic/my?page_size=10000").then(function(e){for(var a=e.data.result.results,s=0;s<a.length;s++)t.ciTaskTransfer.ciTasks.push({key:a[s].id,label:a[s].TaskName,description:a[s].Description})},function(t){})},loadFlowCITasks:function(){},loadMyProject:function(){var t=this;this.$axios.get("/api/project/list?extinfo=1&home=1").then(function(e){t.projects=e.data.result},function(t){})}}),created:function(){this.loadMyCITasks(),this.loadFlowCITasks(),this.loadMyProject()},mounted:function(){},watch:{},components:{FormItem:c.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{value:t.ciNewObject,title:"添加新任务流",width:600,styles:{bottom:"20px",top:"50px"}},on:{"on-cancel":t.cancel}},[a("div",{style:"height:"+t.containerHeight+"px;overflow-y: scroll;overflow-x: hidden"},[a("Form",{ref:"ciTaskFlowCreate",attrs:{model:t.formItem,"label-width":80,rules:t.ruleCustom}},[a("FormItem",{attrs:{label:"项目",prop:"Project"}},[a("Select",{attrs:{filterable:!0,placeholder:"请选择项目"},model:{value:t.formItem.Project,callback:function(e){t.$set(t.formItem,"Project",e)},expression:"formItem.Project"}},t._l(t.projects,function(e){return a("Option",{key:e.id,attrs:{value:e.id,label:e.PBTitle}},[a("span",{staticStyle:{"margin-right":"10px"}},[a("Avatar",{attrs:{src:e.PBAvatar}})],1),t._v(" "),a("span",[t._v(t._s(e.PBTitle))])])}))],1),t._v(" "),a("FormItem",{attrs:{label:"标题",prop:"FlowName"}},[a("Input",{attrs:{placeholder:"任务流名称50个字符以内！"},model:{value:t.formItem.FlowName,callback:function(e){t.$set(t.formItem,"FlowName",e)},expression:"formItem.FlowName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"添加任务",prop:"FlowTaskList"}},[a("Transfer",{attrs:{data:t.ciTaskTransfer.ciTasks,"target-keys":t.ciTaskTransfer.targetKeys,"render-format":t.transferRender,filterable:!0,"filter-method":t.transferFilterMethod,titles:t.ciTaskTransfer.titles,"list-style":t.ciTaskTransfer.listStyle},on:{"on-change":t.moveCITasks}})],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[t.ciNewObject?a("Button",{staticStyle:{width:"80px",height:"30px"},attrs:{type:"success",shape:"circle"},on:{click:function(e){t.addCITaskFlow("ciTaskFlowCreate")}}},[t._v("添加")]):t._e()],1)])},staticRenderFns:[]};var d=a("VU/8")(l,r,!1,function(t){a("1ElI")},"data-v-78864af8",null);e.a=d.exports},"ufU/":function(t,e,a){"use strict";var s=a("Dd8w"),i=a.n(s),o=(a("IcnI"),a("NYxO")),n={name:"ciTaskFlow",data:function(){return{taskFlows:[],editFlow:0}},computed:i()({},Object(o.c)("citaskflow",["ciTaskFlowAdded"]),{taskFlowList:function(){return this.ciTaskFlowAdded&&(this.loadTaskFlows(),this.setCITaskFlowAdded(!1)),this.taskFlows}}),methods:i()({},Object(o.d)("ciglobal",["setCINewObject"]),Object(o.d)("citaskflow",["setCITaskFlowAdded"]),{flowContextMenuClick:function(t){var e=this,a=t.split(":"),s=a[0],i=a[1];if(this.editFlow=i,"rename"===s)for(var o=0;o<this.taskFlowList.length;o++)if(this.taskFlowList[o].flowID+""===i){this.taskFlowList[o].taskFlowNameEdit=!0,this.taskFlowList[o].taskFlowNameView=!1;break}if("copy"===s&&this.copyTaskFlow(i),"delete"===s){var n=this.findTaskFlow(i).flowName;this.$Modal.confirm({title:"删除确认",content:"<p>删除是危险操作，确认要删除任务流 ["+n+" ] 吗？</p>",onOk:function(){e.deleteTaskFlow(i)},onCancel:function(){}})}},findTaskFlow:function(t){for(var e=null,a=0;a<this.taskFlowList.length;a++)if(this.taskFlowList[a].flowID+""===t){e=this.taskFlowList[a];break}return e},copyTaskFlow:function(t){var e=this;this.$axios.get("/api/ci/task_flow/"+t+"/copy").then(function(t){e.loadTaskFlows()},function(t){})},deleteTaskFlow:function(t){var e=this;this.$axios.delete("/api/ci/task_flow/"+t).then(function(t){e.loadTaskFlows()},function(t){})},flowNameEditComplete:function(){for(var t=0;t<this.taskFlowList.length;t++)if(this.taskFlowList[t].flowID+""===this.editFlow){this.taskFlowList[t].taskFlowNameEdit=!1,this.taskFlowList[t].taskFlowNameView=!0,this.updateTaskFlowName(this.editFlow,this.taskFlowList[t].flowName),this.editFlow=0;break}},loadTaskFlows:function(){var t=this;this.$axios.get("/api/ci/task_flow/my?page_size=10000").then(function(e){var a=e.data.result.results;t.taskFlows=[];for(var s=0;s<a.length;s++)t.taskFlows.push({flowID:a[s].id,flowName:a[s].FlowName,lastRunTime:a[s].LastRunTime,taskFlowNameEdit:!1,taskFlowNameView:!0})},function(t){})},updateTaskFlowName:function(t,e){this.$axios.patch("/api/ci/task_flow/"+t+"/",{FlowName:e}).then(function(t){},function(t){})},onStartTaskFlow:function(t){var e=this;this.$axios.get("/api/ci/task_flow/"+t+"/start").then(function(t){e.$Message.success({content:t.data.result.message,duration:10})},function(t){})}}),created:function(){this.loadTaskFlows()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.taskFlowList,function(e){return a("Card",{key:e.flowID,staticClass:"env_archive_folder",attrs:{padding:0}},[a("div",{staticClass:"env_archive_folder_header"},[a("span",{staticClass:"pull-right",staticStyle:{color:"#f0f0f0",padding:"5px"}},[a("Dropdown",{on:{"on-click":t.flowContextMenuClick}},[a("i",{staticClass:"fa fa-bars fa-fw"}),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{staticStyle:{height:"20px","padding-top":"2px","text-align":"left"},attrs:{name:"rename:"+e.flowID}},[a("span",{staticStyle:{"margin-right":"5px"}},[a("Icon",{attrs:{type:"md-create"}})],1),t._v(" "),a("span",[t._v("重命名")])]),t._v(" "),a("DropdownItem",{staticStyle:{height:"20px","padding-top":"2px","text-align":"left"},attrs:{name:"copy:"+e.flowID}},[a("span",{staticStyle:{"margin-right":"5px"}},[a("Icon",{attrs:{type:"ios-copy"}})],1),t._v(" "),a("span",[t._v("复制")])]),t._v(" "),a("DropdownItem",{staticStyle:{height:"20px","padding-top":"2px","text-align":"left"},attrs:{name:"delete:"+e.flowID}},[a("span",{staticStyle:{"margin-right":"5px"}},[a("Icon",{attrs:{type:"ios-trash"}})],1),t._v(" "),a("span",[t._v("删除")])])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"env_archive_folder_body"},[e.taskFlowNameView?a("router-link",{staticStyle:{border:"none","background-color":"inherit","argin-right":"auto","margin-left":"auto",width:"80%","margin-top":"10px","font-size":"6px"},attrs:{to:"/ci/taskflow/"+e.flowID}},[a("span",{staticClass:"task-flow-title cursor-hand",staticStyle:{width:"100%","text-decoration":"underline"}},[t._v("\n\t\t                    "+t._s(e.flowName)+"\n\t\t                  ")])]):t._e(),t._v(" "),e.taskFlowNameEdit?a("div",[a("Input",{staticStyle:{width:"auto","padding-top":"25px","padding-left":"30px"},attrs:{name:"taskFlowName",size:"small",maxlength:50,autofocus:!0},on:{"on-blur":t.flowNameEditComplete},model:{value:e.flowName,callback:function(a){t.$set(e,"flowName",a)},expression:"taskFlow.flowName"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"env_archive_folder_footer"},[a("center",[a("div",{staticClass:"env_archive_version_file"},[a("div",{staticStyle:{color:"inherit"},attrs:{href:"#"}},[a("Tooltip",{attrs:{content:"执行"}},[a("span",{on:{click:function(a){t.onStartTaskFlow(e.flowID)}}},[a("Icon",{attrs:{type:"md-play",size:18,color:"#555"}})],1)])],1)]),t._v(" "),e.lastRunTime?a("div",{staticStyle:{"font-size":"12px","margin-top":"6px"}},[a("Tooltip",{attrs:{content:"上次执行时间"}},[a("span",{staticStyle:{"margin-top":"0px","margin-left":"0px"}},[a("Icon",{staticStyle:{color:"#388e83"},attrs:{type:"ios-checkmark-circle"}}),t._v(" "+t._s(e.lastRunTime))],1)])],1):t._e()])],1)])}))},staticRenderFns:[]};var l=a("VU/8")(n,c,!1,function(t){a("OxLp")},"data-v-432c64da",null);e.a=l.exports}});
//# sourceMappingURL=12.93762b1ab11d1a17be67.js.map
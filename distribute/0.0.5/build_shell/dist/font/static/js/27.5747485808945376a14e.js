webpackJsonp([27],{KHar:function(t,a){},WihJ:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=e("Dd8w"),n=e.n(o),r=e("NYxO"),s=e("5MND"),i={name:"CITag",data:function(){return{tags:[],formData:{TagName:"",TagProjectID:0,TagVisableLevel:1,TagColor:"",TagOwner:0,TagType:1}}},computed:n()({},Object(r.c)(["appBodyHeight","userInfo"]),Object(r.c)("projectglobal",["createDocumentType"]),Object(r.c)("document",["breadNav"]),{containerHeight:function(){return this.appBodyHeight}}),methods:{updateTagTitle:function(t,a){var e=this,o={TagName:t};""!==t&&this.$axios.patch("/api/project/tag/"+a,o).then(function(t){for(var o=0;o<e.tags.length;o++)if(e.tags[o].id===parseInt(a)){e.tags.splice(o,1,t.data.result);break}e.$Message.success({content:"标题更新成功",duration:10,closable:!0})},function(t){e.$Message.error({content:"标题更新失败",duration:10,closable:!0})})},createTag:function(){var t=this;this.formData.TagOwner=this.userInfo.id,this.formData.TagColor=this.randomColor(),""!==this.formData.TagName.trim()&&this.$axios.post("/api/project/tags",this.formData).then(function(a){t.tags.push(a.data.result),t.$Message.success({content:"模块添加成功",duration:10,closable:!0}),t.formData.TagName=""},function(a){t.$Message.error({content:"模块添加失败",duration:10,closable:!0})})},randomColor:function(){var t=Math.floor(256*Math.random()),a=Math.floor(256*Math.random()),e=Math.floor(256*Math.random());return"#"+t.toString(16)+a.toString(16)+e.toString(16)},getTags:function(){var t=this;this.$axios.get("/api/project/tags").then(function(a){t.tags=a.data.result},function(t){})},deleteTag:function(t){var a=this,e=t.split(":");this.$Modal.confirm({title:"删除确认",content:"您即将删除标签["+e[1]+"]",onOk:function(){a.$axios.delete("/api/project/tag/"+e[0]).then(function(t){for(var o=0;o<a.tags.length;o++)if(a.tags[o].id===parseInt(e[0])){a.tags.splice(o,1);break}a.$Message.success({content:"标签删除成功",duration:10,closable:!0})},function(t){a.$Message.error({content:"标签删除失败",duration:10,closable:!0})})},onCancel:function(){}})}},created:function(){this.getTags()},mounted:function(){},watch:{moduleList:function(){this.modules=this.moduleList}},components:{labelEditorInput:s.a}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{style:"padding-top:16px;max-height:"+t.containerHeight+"px;overflow:scroll"},[e("div",{staticStyle:{width:"60%","margin-left":"auto","margin-right":"auto","margin-bottom":"16px"}},[e("Input",{staticStyle:{width:"100%"},attrs:{search:"","enter-button":"添加",icon:"ios-clock-outline",maxlength:50,placeholder:"输入Tag名称，回车创建标签"},on:{"on-search":t.createTag},model:{value:t.formData.TagName,callback:function(a){t.$set(t.formData,"TagName",a)},expression:"formData.TagName"}})],1),t._v(" "),t._l(t.tags,function(a){return e("Card",{key:a.id,staticClass:"member-card cursor-hand",attrs:{padding:10,bordered:!1,"dis-hover":""}},[e("Row",[e("i-col",{attrs:{xl:20,lg:20,md:18,sm:18}},[e("span",{staticStyle:{"font-weight":"bold"}},[e("span",{staticStyle:{float:"left","margin-right":"10px"}},[e("Tag",{attrs:{color:a.TagColor}})],1),t._v(" "),e("label-editor-input",{staticStyle:{"max-width":"400px",float:"left"},attrs:{placeHolder:"模块名称",id:a.id,displayText:a.TagName},on:{updateValue:t.updateTagTitle}})],1)]),t._v(" "),e("i-col",{attrs:{xl:4,lg:4,md:6,sm:6}},[e("span",[e("Dropdown",{attrs:{transfer:""},on:{"on-click":t.deleteTag}},[e("a",{staticStyle:{color:"inherit"},attrs:{href:"javascript:void(0)"}},[e("span",[e("Icon",{attrs:{size:24,type:"ios-more"}})],1)]),t._v(" "),e("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[e("DropdownItem",{attrs:{name:a.id+":"+a.TagName}},[e("Icon",{attrs:{type:"ios-trash-outline"}}),t._v(" "),e("span",[t._v("删除")])],1)],1)],1)],1)])],1)],1)})],2)},staticRenderFns:[]};var l=e("VU/8")(i,c,!1,function(t){e("KHar")},"data-v-16c6955a",null);a.default=l.exports}});
//# sourceMappingURL=27.5747485808945376a14e.js.map
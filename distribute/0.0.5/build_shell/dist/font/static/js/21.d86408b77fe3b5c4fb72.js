webpackJsonp([21],{QZjJ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Dd8w"),i=s.n(a),r=s("NYxO"),o=s("504h"),n=s.n(o),c={name:"IssueStatistics",props:["projectID"],data:function(){return{issueStatusSummary:{},pieChartOption:{chart:{type:"pie"},title:{text:"任务状态分布"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.name}: <b>{point.percentage:.1f}%</b>"},series:[{name:"任务占比",data:[]}]}}},computed:i()({},Object(r.c)(["appBodyHeight","userInfo"]),Object(r.c)("projectglobal",["projectVersion","dateRange"]),{containerHeight:function(){return this.appBodyHeight-60}}),methods:i()({},Object(r.d)("projectglobal",["setCreateDocumentType","setCreateDialogShow"]),Object(r.d)("document",["setbreadNav","setEditDocument"]),{loadIssueStatusSummary:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/status_summary"+e).then(function(e){t.issueStatusSummary=e.data.result},function(t){})},createOpenedIssueTotal:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/issue_trend_total"+e).then(function(e){var s=t.createTrendLineChart(e.data.result);n.a.chart("OpenedIssueTotal",s)},function(t){})},createOpenedIssueToday:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/issue_trend_new"+e).then(function(e){var s=t.createTrendLineChart(e.data.result);n.a.chart("OpenedIssueToday",s)},function(t){})},createVersionIssueTotal:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/statistics/version_total_issue"+e).then(function(e){var s=t.createColumnChart(e.data.result);n.a.chart("versionIssueTotal",s)},function(t){})},createModuleIssueTotal:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/issue_count_per_module"+e).then(function(e){var s=t.createColumnChart(e.data.result);n.a.chart("moduleIssueTotal",s)},function(t){})},createSeverityIssueTotal:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/issue_count_by_severity"+e).then(function(e){var s=t.createPieChart(e.data.result);n.a.chart("SeverityIssueTotal",s)},function(t){})},createCategoryIssueTotal:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/issue_count_by_category"+e).then(function(e){var s=t.createPieChart(e.data.result);n.a.chart("CategoryIssueTotal",s)},function(t){})},createResolveResultIssueTotal:function(){var t=this,e="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(e=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/issue_count_by_resolveresult"+e).then(function(e){var s=t.createPieChart(e.data.result);n.a.chart("ResolveResultIssueTotal",s)},function(t){})},createTrendLineChart:function(t){return{chart:{type:t.chart_type},title:{text:t.chart_title},subtitle:{text:t.chart_sub_title},xAxis:{categories:t.xaxis},yAxis:{title:{}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!0}},series:t.series_data}},createColumnChart:function(t){return{chart:{type:t.chart_type},title:{text:t.chart_title},subtitle:{text:t.chart_sub_type},xAxis:{categories:t.xaxis,crosshair:!0},yAxis:{min:0,title:{text:"问题数量 (个)"}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name}: </td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{borderWidth:0,colorByPoint:!0}},series:t.series_data}},createPieChart:function(t){return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:t.chart_title},tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{type:t.chart_type,name:t.chart_title,data:t.series_data}]}},createIssueByPeople:function(){var t="?CreationTime="+this.dateRange;""===this.dateRange[0]&&(t=""),this.$axios.get("/api/project/"+this.projectID+"/"+this.projectVersion+"/statistics/unclosed_issue"+t).then(function(t){var e=t.data.result;n.a.chart("unclosed_issue_column",{chart:{type:e.chart_type},title:{text:e.chart_title},xAxis:{categories:e.xaxis},yAxis:{min:0,title:{text:""},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:n.a.theme&&n.a.theme.textColor||"gray"}}},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:n.a.theme&&n.a.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1},tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>总数: "+this.point.stackTotal}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:n.a.theme&&n.a.theme.dataLabelsColor||"white",style:{textShadow:"0 0 3px black"}}}},series:e.series_data})},function(t){})},initIssueChart:function(){this.createOpenedIssueToday(),this.createIssueByPeople(),this.createOpenedIssueTotal(),this.createVersionIssueTotal(),this.createModuleIssueTotal(),this.createSeverityIssueTotal(),this.createCategoryIssueTotal(),this.createResolveResultIssueTotal(),this.loadIssueStatusSummary()}}),created:function(){this.initIssueChart(),console.log(this.dateRange)},mounted:function(){},watch:{projectID:function(){this.initIssueChart()},projectVersion:function(){this.initIssueChart()},dateRange:function(){this.initIssueChart()}},components:{}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{style:"height:"+t.containerHeight+"px;overflow-y: scroll;overflow-x: hidden"},[s("Row",[s("i-col",{attrs:{span:"24"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px",height:"200px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          问题状态统计\n        ")],1),t._v(" "),s("div",[s("Row",{attrs:{type:"flex",justify:"space-between"}},[s("i-col",{staticStyle:{padding:"5px"},attrs:{span:"6"}},[s("Card",{staticStyle:{height:"110px",color:"#45be95"},attrs:{padding:5,"dis-hover":""}},[s("div",{staticClass:"summary-number-title"},[t._v("新建:")]),t._v(" "),s("div",{staticClass:"summary-number-content"},[s("router-link",{staticStyle:{color:"inherit"},attrs:{to:"/home/my/issue"}},[t._v("\n                    "+t._s(t.issueStatusSummary.newIssueCount)+"\n                  ")])],1)])],1),t._v(" "),s("i-col",{staticStyle:{padding:"5px"},attrs:{span:"6"}},[s("Card",{staticStyle:{height:"110px",color:"#5bc0de"},attrs:{padding:5,"dis-hover":""}},[s("div",{staticClass:"summary-number-title"},[t._v("已解决:")]),t._v(" "),s("div",{staticClass:"summary-number-content"},[s("router-link",{staticStyle:{color:"inherit"},attrs:{to:"/home/my/fortesting"}},[t._v("\n                    "+t._s(t.issueStatusSummary.reslovedIssueCount)+"\n                  ")])],1)])],1),t._v(" "),s("i-col",{staticStyle:{padding:"5px"},attrs:{span:"6"}},[s("Card",{staticStyle:{height:"110px",color:"#f1494e"},attrs:{padding:5,"dis-hover":""}},[s("div",{staticClass:"summary-number-title"},[t._v("重新打开:")]),t._v(" "),s("div",{staticClass:"summary-number-content"},[s("router-link",{staticStyle:{color:"inherit"},attrs:{to:"/home/my/task"}},[t._v(t._s(t.issueStatusSummary.reopenedIssueCount))])],1)])],1),t._v(" "),s("i-col",{staticStyle:{padding:"5px"},attrs:{span:"6"}},[s("Card",{staticStyle:{height:"110px",color:"#bedad3"},attrs:{padding:5,"dis-hover":""}},[s("div",{staticClass:"summary-number-title"},[t._v("已关闭:")]),t._v(" "),s("div",{staticClass:"summary-number-content"},[s("router-link",{staticStyle:{color:"inherit"},attrs:{to:"/home/my/task"}},[t._v(t._s(t.issueStatusSummary.closedIssueCount))])],1)])],1)],1)],1)])],1)],1),t._v(" "),s("Row",[s("i-col",{attrs:{span:"24"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          剩余问题分布\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"unclosed_issue_column"}})])],1)],1),t._v(" "),s("Row",[s("i-col",{attrs:{span:"24"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          每日新增问题趋势\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"OpenedIssueToday"}})])],1)],1),t._v(" "),s("Row",[s("i-col",{attrs:{span:"24"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          问题总体趋势\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"OpenedIssueTotal"}})])],1)],1),t._v(" "),s("Row",[s("i-col",{attrs:{span:"24"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          各版本问题分布\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"versionIssueTotal"}})])],1)],1),t._v(" "),s("Row",[s("i-col",{attrs:{span:"24"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          各模块问题分布\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"moduleIssueTotal"}})])],1)],1),t._v(" "),s("Row",[s("i-col",{attrs:{span:"8"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px","margin-right":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          问题严重性\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"SeverityIssueTotal"}})])],1),t._v(" "),s("i-col",{attrs:{span:"8"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px","margin-right":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          问题分类\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"CategoryIssueTotal"}})])],1),t._v(" "),s("i-col",{attrs:{span:"8"}},[s("Card",{staticClass:"cursor-hand",staticStyle:{"margin-bottom":"20px"},attrs:{bordered:!1,"dis-hover":""}},[s("div",{staticStyle:{"font-weight":"500"},attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-stats"}}),t._v("\n          问题解决结果\n        ")],1),t._v(" "),s("div",{staticClass:"chart-trend",attrs:{id:"ResolveResultIssueTotal"}})])],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(c,l,!1,function(t){s("dNxx")},"data-v-5b93e142",null).exports,u={name:"ProjectStatistics",props:["projectID"],data:function(){return{}},computed:i()({},Object(r.c)(["appBodyHeight","userInfo"]),Object(r.c)("projectglobal",["createDocumentType"]),{containerHeight:function(){return this.appBodyHeight},folder:function(){return this.folderID?this.folderID:""}}),methods:i()({},Object(r.d)("projectglobal",["setCreateDocumentType","setCreateDialogShow"]),Object(r.d)("document",["setbreadNav","setEditDocument"])),created:function(){},mounted:function(){},watch:{},components:{IssueStatistics:d}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Tabs",{staticStyle:{"padding-left":"16px","padding-right":"16px"},attrs:{value:"name1"}},[e("TabPane",{attrs:{label:"问题",name:"name1"}},[e("issue-statistics",{attrs:{projectID:this.projectID}})],1),this._v(" "),e("TabPane",{attrs:{label:"任务",name:"name2"}},[e("Alert",{attrs:{"show-icon":""}},[this._v("持续开发中,敬请期待")])],1),this._v(" "),e("TabPane",{attrs:{label:"需求",name:"name3"}},[e("Alert",{attrs:{"show-icon":""}},[this._v("持续开发中，敬请期待")])],1)],1)],1)},staticRenderFns:[]};var p=s("VU/8")(u,h,!1,function(t){s("r0xl")},"data-v-1953c2a4",null);e.default=p.exports},dNxx:function(t,e){},r0xl:function(t,e){}});
//# sourceMappingURL=21.d86408b77fe3b5c4fb72.js.map
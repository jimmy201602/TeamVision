{"version":3,"sources":["webpack:///src/pages/ci/settings/CITag.vue","webpack:///./src/pages/ci/settings/CITag.vue?fbb1","webpack:///./src/pages/ci/settings/CITag.vue"],"names":["CITag","name","data","tags","formData","TagName","TagProjectID","TagVisableLevel","TagColor","TagOwner","TagType","computed","extends_default","Object","vuex_esm","containerHeight","this","appBodyHeight","methods","updateTagTitle","value","id","_this","parameters","$axios","patch","then","response","i","length","parseInt","splice","result","$Message","success","content","duration","closable","error","createTag","_this2","userInfo","randomColor","trim","post","push","r","Math","floor","random","g","b","toString","getTags","_this3","get","deleteTag","_this4","moduleInfo","split","$Modal","confirm","title","onOk","delete","onCancel","created","mounted","watch","moduleList","modules","components","labelEditorInput","LabelEditor_Input","settings_CITag","render","_vm","_h","$createElement","_c","_self","style","staticStyle","width","margin-left","margin-right","margin-bottom","attrs","search","enter-button","icon","maxlength","placeholder","on","on-search","model","callback","$$v","$set","expression","_v","_l","tag","key","staticClass","padding","bordered","dis-hover","xl","lg","md","sm","font-weight","float","color","max-width","placeHolder","displayText","updateValue","transfer","on-click","href","size","type","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"font/static/js/27.5747485808945376a14e.js","sourcesContent":["<template>\n  <div :style=\"'padding-top:16px;max-height:'+ containerHeight+ 'px;overflow:scroll'\">\n    <div style=\"width: 60%;margin-left: auto;margin-right: auto; margin-bottom: 16px;\">\n      <Input v-model=\"formData.TagName\" search enter-button=\"添加\"  @on-search=\"createTag\" icon=\"ios-clock-outline\" :maxlength=\"50\" placeholder=\"输入Tag名称，回车创建标签\" style=\"width: 100%\" />\n    </div>\n    <Card  v-for=\"tag in tags\"  :padding=\"10\" :key=\"tag.id\" :bordered=\"false\" dis-hover class=\"member-card cursor-hand\">\n      <Row>\n        <i-col :xl=\"20\" :lg=\"20\" :md=\"18\" :sm=\"18\">\n          <span style=\"font-weight: bold;\">\n            <span style=\"float: left;margin-right: 10px;\">\n              <Tag  :color=\"tag.TagColor\"></Tag>\n            </span>\n             <label-editor-input style=\"max-width: 400px;float: left;\"  @updateValue=\"updateTagTitle\" placeHolder=\"模块名称\" :id=\"tag.id\" :displayText=\"tag.TagName\"></label-editor-input>\n          </span>\n        </i-col>\n        <i-col :xl=\"4\" :lg=\"4\" :md=\"6\" :sm=\"6\">\n         <span>\n            <Dropdown transfer @on-click=\"deleteTag\">\n             <a href=\"javascript:void(0)\" style=\"color: inherit;\">\n                <span>\n                  <Icon :size=\"24\" type=\"ios-more\" />\n                </span>\n             </a>\n              <DropdownMenu slot=\"list\">\n                 <DropdownItem :name=\"tag.id+':'+tag.TagName\"><Icon type=\"ios-trash-outline\" />\n                   <span >删除</span>\n                 </DropdownItem>\n              </DropdownMenu>\n           </Dropdown>\n          </span>\n        </i-col>\n      </Row>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapMutations } from 'vuex'\nimport labelEditorInput from '../../../components/common/LabelEditor-Input.vue'\n\nexport default {\n  name: 'CITag',\n  data () {\n    return {\n      tags: [],\n      formData: {\n        TagName: '',\n        TagProjectID: 0,\n        TagVisableLevel: 1,\n        TagColor: '',\n        TagOwner: 0,\n        TagType: 1\n      }\n    }\n  },\n  computed: {\n    ...mapGetters(['appBodyHeight', 'userInfo']),\n    ...mapGetters('projectglobal', ['createDocumentType']),\n    ...mapGetters('document', ['breadNav']),\n    containerHeight: function () {\n      return this.appBodyHeight\n    }\n\n  },\n\n  methods: {\n\n    updateTagTitle: function (value, id) {\n      let parameters = {TagName: value}\n      if (value !== '') {\n        this.$axios.patch('/api/project/tag/' + id , parameters).then(response => {\n          for (let i = 0; i < this.tags.length; i++) {\n            if (this.tags[i].id === parseInt(id)) {\n              this.tags.splice(i, 1, response.data.result)\n              break\n            }\n          }\n          this.$Message.success({\n            content: '标题更新成功',\n            duration: 10,\n            closable: true\n          })\n        }, response => {\n          this.$Message.error({\n            content: '标题更新失败',\n            duration: 10,\n            closable: true\n          })\n        })\n      }\n\n    },\n\n    createTag: function () {\n      this.formData.TagOwner = this.userInfo.id\n      this.formData.TagColor = this.randomColor()\n      if (this.formData.TagName.trim() !== '') {\n        this.$axios.post('/api/project/tags', this.formData).then(response => {\n          this.tags.push(response.data.result)\n          this.$Message.success({\n            content: '模块添加成功',\n            duration: 10,\n            closable: true\n          })\n          this.formData.TagName = ''\n        }, response => {\n          this.$Message.error({\n            content: '模块添加失败',\n            duration: 10,\n            closable: true\n          })\n        })\n      }\n    },\n\n    randomColor: function() {\n      var r = Math.floor(Math.random()*256);\n      var g = Math.floor(Math.random()*256);\n      var b = Math.floor(Math.random()*256);\n      var color = '#'+r.toString(16)+g.toString(16)+b.toString(16);\n      return color\n    },\n\n    getTags: function () {\n      this.$axios.get('/api/project/tags').then(response => {\n        this.tags = response.data.result\n\n      }, response => {\n      })\n    },\n\n    deleteTag: function (value) {\n      let moduleInfo = value.split(':')\n      this.$Modal.confirm({\n        title: '删除确认',\n        content: '您即将删除标签[' + moduleInfo[1] + ']',\n        onOk: () => {\n          this.$axios.delete('/api/project/tag/' + moduleInfo[0]).then(response => {\n            for (let i = 0; i < this.tags.length; i++) {\n              if (this.tags[i].id === parseInt(moduleInfo[0])) {\n                this.tags.splice(i, 1)\n                break\n              }\n            }\n            this.$Message.success({\n              content: '标签删除成功',\n              duration: 10,\n              closable: true\n            })\n          }, response => {\n            this.$Message.error({\n              content: '标签删除失败',\n              duration: 10,\n              closable: true\n            })\n          })\n        },\n        onCancel: () => {\n\n        }\n      })\n\n    }\n\n  },\n\n  created: function () {\n    this.getTags()\n  },\n\n  mounted: function () {\n  },\n\n  watch: {\n    moduleList: function () {\n      this.modules = this.moduleList\n    }\n  },\n\n  components: {\n    labelEditorInput\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n\n  .member-card {\n    width: 100%;\n    height: 50px;\n    margin-right: 16px;\n    margin-left: 16px;\n    margin-bottom: 2px;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/ci/settings/CITag.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:('padding-top:16px;max-height:'+ _vm.containerHeight+ 'px;overflow:scroll')},[_c('div',{staticStyle:{\"width\":\"60%\",\"margin-left\":\"auto\",\"margin-right\":\"auto\",\"margin-bottom\":\"16px\"}},[_c('Input',{staticStyle:{\"width\":\"100%\"},attrs:{\"search\":\"\",\"enter-button\":\"添加\",\"icon\":\"ios-clock-outline\",\"maxlength\":50,\"placeholder\":\"输入Tag名称，回车创建标签\"},on:{\"on-search\":_vm.createTag},model:{value:(_vm.formData.TagName),callback:function ($$v) {_vm.$set(_vm.formData, \"TagName\", $$v)},expression:\"formData.TagName\"}})],1),_vm._v(\" \"),_vm._l((_vm.tags),function(tag){return _c('Card',{key:tag.id,staticClass:\"member-card cursor-hand\",attrs:{\"padding\":10,\"bordered\":false,\"dis-hover\":\"\"}},[_c('Row',[_c('i-col',{attrs:{\"xl\":20,\"lg\":20,\"md\":18,\"sm\":18}},[_c('span',{staticStyle:{\"font-weight\":\"bold\"}},[_c('span',{staticStyle:{\"float\":\"left\",\"margin-right\":\"10px\"}},[_c('Tag',{attrs:{\"color\":tag.TagColor}})],1),_vm._v(\" \"),_c('label-editor-input',{staticStyle:{\"max-width\":\"400px\",\"float\":\"left\"},attrs:{\"placeHolder\":\"模块名称\",\"id\":tag.id,\"displayText\":tag.TagName},on:{\"updateValue\":_vm.updateTagTitle}})],1)]),_vm._v(\" \"),_c('i-col',{attrs:{\"xl\":4,\"lg\":4,\"md\":6,\"sm\":6}},[_c('span',[_c('Dropdown',{attrs:{\"transfer\":\"\"},on:{\"on-click\":_vm.deleteTag}},[_c('a',{staticStyle:{\"color\":\"inherit\"},attrs:{\"href\":\"javascript:void(0)\"}},[_c('span',[_c('Icon',{attrs:{\"size\":24,\"type\":\"ios-more\"}})],1)]),_vm._v(\" \"),_c('DropdownMenu',{attrs:{\"slot\":\"list\"},slot:\"list\"},[_c('DropdownItem',{attrs:{\"name\":tag.id+':'+tag.TagName}},[_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"删除\")])],1)],1)],1)],1)])],1)],1)})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16c6955a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/ci/settings/CITag.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16c6955a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CITag.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CITag.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CITag.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16c6955a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CITag.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-16c6955a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/ci/settings/CITag.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/pages/ci/settings/CISettingsCreate.js","webpack:///src/pages/ci/settings/CIAgent.vue","webpack:///./src/pages/ci/settings/CIAgent.vue?1301","webpack:///./src/pages/ci/settings/CIAgent.vue"],"names":["agentValidateRules","Name","type","required","min","max","message","trigger","AgentWorkSpace","BuildToolsDir","CIAgent","name","data","agents","showAgentDetail","formItem","AgentTags","Executors","editItem","agentTagList","ruleCustom","extends_default","computed","Object","vuex_esm","containerHeight","this","appBodyHeight","modalHeight","methods","onCloseDetailPanel","showAgentForm","agentID","findAgent","entry","result","index","i","length","id","addAgent","_this","$refs","validate","valid","setCINewObject","$axios","post","then","response","push","$Message","success","content","duration","error","reset","editAgent","_this2","put","getAgents","cancel","getAgentTags","_this3","get","_this4","setAgentTag","value","deleteAgent","created","loadProjectInfo","mounted","watch","components","labelEditorInput","LabelEditor_Input","settings_CIAgent","render","_vm","_h","$createElement","_c","_self","style","staticStyle","padding-top","_l","agent","key","staticClass","attrs","bordered","dis-hover","xl","lg","md","sm","span","font-weight","display","padding-right","_v","_s","text-decoration","on","click","$event","margin-left","tag","color","TagColor","TagName","projectPermision","transfer","on-click","href","size","slot","member","_e","ciNewObject","title","mask-closable","width","styles","bottom","top","on-cancel","ref","model","label-width","rules","label","prop","placeholder","callback","$$v","$set","expression","multiple","on-change","onProjectChange","margin-right","background","shape","step","height","class-name","inner","mask","on-close","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"font/static/js/28.95350a28a3730bdcd2ee.js","sourcesContent":["//初始化项目以及版本信息\n\nlet agentValidateRules={\n  Name: [\n    { type: 'string', required: true, min: 1, max: 20, message: 'Agent标题长度必须在1-20个字符之间！', trigger: 'blur' }\n  ],\n  AgentWorkSpace: [\n    { type: 'string', required: true, message: '任务工作目录不能为空' }\n  ],\n  BuildToolsDir: [\n    { type: 'string', required: true, message: '工具目录不能为空' }\n  ]\n}\n\nexport {\n  agentValidateRules\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/ci/settings/CISettingsCreate.js","<template>\n  <div :style=\"'overflow-y:auto;height:'+ containerHeight+'px;'\" >\n    <div style=\"padding-top: 16px;\">\n      <Card v-for=\"agent in agents\" :key=\"agent.id\"   :bordered=\"false\" dis-hover class=\"member-card cursor-hand\">\n        <Row>\n          <i-col :xl=\"20\" :lg=\"20\" :md=\"18\" :sm=\"12\">\n            <Row>\n              <i-col span=\"4\">\n              <span style=\"font-weight: bold; display: inline-block\">\n              <span style=\"padding-right: 20px;\">{{ agent.id }}</span>\n              <span @click=\"showAgentForm(agent.id)\" style=\"text-decoration: underline;\">{{ agent.Name }}</span>\n              </span>\n              </i-col>\n              <i-col span=\"20\">\n              <span style=\"margin-left: 15px;\">\n              <span style=\"display: inline-block\">\n                <Tag v-for=\"tag in agent.TagFormat\" :key=\"tag.id\" :color=\"tag.TagColor\" class=\"member-tag\">{{ tag.TagName }}</Tag>\n              </span>\n            </span>\n              </i-col>\n            </Row>\n          </i-col>\n          <i-col :xl=\"4\" :lg=\"4\" :md=\"8\" :sm=\"12\">\n          <span v-if=\"projectPermision > 3 \">\n            <Dropdown transfer @on-click=\"deleteAgent\" >\n             <a href=\"javascript:void(0)\" style=\"color: inherit;\">\n                <span>\n                  <Icon :size=\"24\" type=\"ios-more\" />\n                </span>\n             </a>\n              <DropdownMenu slot=\"list\">\n                 <DropdownItem :name=\"member.id+':'+agent.name\"><Icon type=\"ios-trash-outline\" />\n                   <span >删除</span>\n                 </DropdownItem>\n              </DropdownMenu>\n           </Dropdown>\n          </span>\n          </i-col>\n        </Row>\n      </Card>\n      <Modal :value=\"ciNewObject\" title=\"添加Agent\" :mask-closable=\"false\" :width=\"600\" @on-cancel=\"cancel\" :styles=\"{bottom:'20px',top: '50px'}\">\n        <div :style=\"'height:' + modalHeight + 'px;overflow-y: scroll;overflow-x: hidden'\">\n          <Form  ref=\"ciAgentCreate\" :model=\"formItem\" :label-width=\"80\" :rules=\"ruleCustom\">\n            <FormItem label=\"名称\" prop=\"Name\">\n              <Input v-model=\"formItem.Name\" placeholder=\"Agent名称20个字符以内！\" />\n            </FormItem>\n            <FormItem label=\"标签\" prop=\"AgentTags\">\n              <Select v-model=\"formItem.AgentTags\" multiple  placeholder=\"为Agent添加标签\" @on-change=\"onProjectChange\">\n                <Option v-for=\"tag in agentTagList\" :key=\"tag.id\" :value=\"tag.id\" :label=\"tag.TagName\">\n                  <span style=\"margin-right: 10px;\" ><Avatar shape=\"square\" :style=\"{background:tag.TagColor}\" size=\"small\" /></span>\n                  <span >{{ tag.TagName }}</span>\n                </Option>\n              </Select>\n            </FormItem>\n            <FormItem label=\"工作目录\" prop=\"AgentWorkSpace\">\n              <Input v-model=\"formItem.AgentWorkSpace\" placeholder=\"任务工作目录\" />\n            </FormItem>\n            <FormItem label=\"执行器数量\" prop=\"Executors\">\n              <InputNumber :max=\"20\" :min=\"1\" :step=\"1\" v-model=\"formItem.Executors\"></InputNumber>\n            </FormItem>\n            <FormItem label=\"工具目录\" prop=\"BuildToolsDir\">\n              <Input v-model=\"formItem.BuildToolsDir\" placeholder=\"Agent上存放通用工具目录\"/>\n            </FormItem>\n          </Form>\n        </div>\n\n        <div slot=\"footer\">\n          <Button  type=\"success\" style=\"width: 80px; height:30px;\" @click=\"addAgent('ciAgentCreate')\" shape=\"circle\">添加\n          </Button>\n          <Button type=\"default\"  style=\"width: 80px; height:30px;\"  shape=\"circle\" @click=\"cancel\">取消</Button>\n        </div>\n      </Modal>\n    </div>\n    <Drawer  :value=\"showAgentDetail\" class-name=\"fdsfds\" @on-close=\"onCloseDetailPanel\" :inner=\"true\" :transfer=\"false\" :width=\"40\" :mask=\"false\">\n      <div slot style=\"\"></div>\n      <Form  ref=\"editAgent\" :model=\"editItem\" :label-width=\"80\" :rules=\"ruleCustom\">\n        <FormItem label=\"名称\" prop=\"Name\">\n          <Input v-model=\"editItem.Name\" placeholder=\"Agent名称20个字符以内！\" />\n        </FormItem>\n        <FormItem label=\"标签\" prop=\"AgentTags\">\n          <Select v-model=\"editItem.AgentTags\" multiple  placeholder=\"为Agent添加标签\" @on-change=\"onProjectChange\">\n            <Option v-for=\"tag in agentTagList\" :key=\"tag.id\" :value=\"tag.id\" :label=\"tag.TagName\">\n              <span style=\"margin-right: 10px;\" ><Avatar shape=\"square\" :style=\"{background:tag.TagColor}\" size=\"small\" /></span>\n              <span >{{ tag.TagName }}</span>\n            </Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"工作目录\" prop=\"AgentWorkSpace\">\n          <Input v-model=\"editItem.AgentWorkSpace\" placeholder=\"任务工作目录\" />\n        </FormItem>\n        <FormItem label=\"执行器数量\" prop=\"Executors\">\n          <InputNumber :max=\"20\" :min=\"1\" :step=\"1\" v-model=\"editItem.Executors\"></InputNumber>\n        </FormItem>\n        <FormItem label=\"工具目录\" prop=\"BuildToolsDir\">\n          <Input v-model=\"editItem.BuildToolsDir\" placeholder=\"Agent上存放通用工具目录\"/>\n        </FormItem>\n      </Form>\n      <Button type=\"success\"  style=\"width: 80px; height:30px;margin-left:30px;\" shape=\"circle\" @click=\"editAgent('editAgent')\">保存</Button>\n    </Drawer>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapMutations } from 'vuex'\nimport labelEditorInput from '../../../components/common/LabelEditor-Input.vue'\nimport { agentValidateRules } from './CISettingsCreate'\n\nexport default {\n  name: 'CIAgent',\n  data () {\n    return {\n      agents: [],\n      showAgentDetail: false,\n      formItem: {\n        Name: '',\n        AgentWorkSpace: '',\n        AgentTags: [],\n        Executors: 1,\n        BuildToolsDir: ''\n      },\n      editItem: {\n        Name: '',\n        AgentWorkSpace: '',\n        AgentTags: [],\n        Executors: 1,\n        BuildToolsDir: ''\n      },\n      agentTagList: [],\n      ruleCustom: {\n        ...agentValidateRules\n      }\n\n    }\n  },\n  computed: {\n    ...mapGetters(['appBodyHeight', 'userInfo']),\n    ...mapGetters('ciglobal', ['ciNewObject']),\n    containerHeight: function () {\n      return this.appBodyHeight\n    },\n\n    modalHeight: function () {\n      return this.appBodyHeight - 200\n    }\n\n  },\n\n  methods: {\n    ...mapMutations('ciglobal', ['setCINewObject']),\n\n    onCloseDetailPanel: function () {\n      this.showAgentDetail = false\n    },\n\n    showAgentForm: function (agentID) {\n      this.showAgentDetail = true\n      this.editItem = this.findAgent(agentID).entry\n    },\n\n    findAgent: function (agentID) {\n      let result = {index:-1,entry: null}\n      for (let i = 0; i < this.agents.length; i++) {\n          if (agentID === this.agents[i].id) {\n            result.entry = this.agents[i]\n            result.index = i\n            break\n          }\n      }\n      return result\n    },\n\n    addAgent (name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.setCINewObject(false)\n          let successMessage = 'Agent添加成功'\n          let failMessage = 'Agent添加失败，请联系管理员或者重试'\n          this.$axios.post('/api/common/agents', this.formItem).then(response => {\n            this.agents.push(response.data.result)\n            this.$Message.success({\n              content: successMessage,\n              duration: 10\n            })\n          }, response => {\n            this.setCINewObject(false)\n            this.$Message.error({\n              content: failMessage,\n              duration: 10\n            })\n          })\n          this.$refs[name].reset()\n        }\n      })\n    },\n\n    editAgent (name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.setCINewObject(false)\n          let successMessage = 'Agent保存成功'\n          let failMessage = 'Agent保存失败，请联系管理员或者重试'\n          this.$axios.put('/api/common/agent/' + this.editItem.id, this.editItem).then(response => {\n            this.getAgents()\n            this.$Message.success({\n              content: successMessage,\n              duration: 10\n            })\n          }, response => {\n            this.$Message.error({\n              content: failMessage,\n              duration: 10\n            })\n          })\n          this.$refs[name].reset()\n        }\n      })\n    },\n    cancel () {\n      this.setCINewObject(false)\n    },\n\n    getAgentTags: function () {\n      this.$axios.get('/api/project/tags').then(response => {\n        this.agentTagList = response.data.result\n      }, response => {\n\n      })\n    },\n\n    getAgents: function () {\n      this.$axios.get('/api/common/agents').then(response => {\n        this.agents = response.data.result\n      }, response => {\n\n      })\n    },\n\n    setAgentTag: function (value) {\n\n    },\n\n    deleteAgent: function (value) {\n\n    }\n\n  },\n\n  created: function () {\n    this.getAgentTags()\n    this.getAgents()\n    this.loadProjectInfo()\n  },\n\n  mounted: function () {\n\n  },\n\n  watch: {},\n\n  components: {\n    labelEditorInput\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"less\">\n\n  .member-card {\n    width: 100%;\n    height: 45px;\n    margin-right: 16px;\n    margin-left: 16px;\n    margin-bottom: 2px;\n  }\n\n  .member-avatar {\n    height:20px;\n    width: 20px;\n    border-radius: 10px;\n    padding-bottom: 2px;\n    margin-right: 15px;\n  }\n\n  .member-tag {\n    font-size:10px;\n    height: 18px;\n    line-height: 18px;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/ci/settings/CIAgent.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:('overflow-y:auto;height:'+ _vm.containerHeight+'px;')},[_c('div',{staticStyle:{\"padding-top\":\"16px\"}},[_vm._l((_vm.agents),function(agent){return _c('Card',{key:agent.id,staticClass:\"member-card cursor-hand\",attrs:{\"bordered\":false,\"dis-hover\":\"\"}},[_c('Row',[_c('i-col',{attrs:{\"xl\":20,\"lg\":20,\"md\":18,\"sm\":12}},[_c('Row',[_c('i-col',{attrs:{\"span\":\"4\"}},[_c('span',{staticStyle:{\"font-weight\":\"bold\",\"display\":\"inline-block\"}},[_c('span',{staticStyle:{\"padding-right\":\"20px\"}},[_vm._v(_vm._s(agent.id))]),_vm._v(\" \"),_c('span',{staticStyle:{\"text-decoration\":\"underline\"},on:{\"click\":function($event){_vm.showAgentForm(agent.id)}}},[_vm._v(_vm._s(agent.Name))])])]),_vm._v(\" \"),_c('i-col',{attrs:{\"span\":\"20\"}},[_c('span',{staticStyle:{\"margin-left\":\"15px\"}},[_c('span',{staticStyle:{\"display\":\"inline-block\"}},_vm._l((agent.TagFormat),function(tag){return _c('Tag',{key:tag.id,staticClass:\"member-tag\",attrs:{\"color\":tag.TagColor}},[_vm._v(_vm._s(tag.TagName))])}))])])],1)],1),_vm._v(\" \"),_c('i-col',{attrs:{\"xl\":4,\"lg\":4,\"md\":8,\"sm\":12}},[(_vm.projectPermision > 3 )?_c('span',[_c('Dropdown',{attrs:{\"transfer\":\"\"},on:{\"on-click\":_vm.deleteAgent}},[_c('a',{staticStyle:{\"color\":\"inherit\"},attrs:{\"href\":\"javascript:void(0)\"}},[_c('span',[_c('Icon',{attrs:{\"size\":24,\"type\":\"ios-more\"}})],1)]),_vm._v(\" \"),_c('DropdownMenu',{attrs:{\"slot\":\"list\"},slot:\"list\"},[_c('DropdownItem',{attrs:{\"name\":_vm.member.id+':'+agent.name}},[_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"删除\")])],1)],1)],1)],1):_vm._e()])],1)],1)}),_vm._v(\" \"),_c('Modal',{attrs:{\"value\":_vm.ciNewObject,\"title\":\"添加Agent\",\"mask-closable\":false,\"width\":600,\"styles\":{bottom:'20px',top: '50px'}},on:{\"on-cancel\":_vm.cancel}},[_c('div',{style:('height:' + _vm.modalHeight + 'px;overflow-y: scroll;overflow-x: hidden')},[_c('Form',{ref:\"ciAgentCreate\",attrs:{\"model\":_vm.formItem,\"label-width\":80,\"rules\":_vm.ruleCustom}},[_c('FormItem',{attrs:{\"label\":\"名称\",\"prop\":\"Name\"}},[_c('Input',{attrs:{\"placeholder\":\"Agent名称20个字符以内！\"},model:{value:(_vm.formItem.Name),callback:function ($$v) {_vm.$set(_vm.formItem, \"Name\", $$v)},expression:\"formItem.Name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"标签\",\"prop\":\"AgentTags\"}},[_c('Select',{attrs:{\"multiple\":\"\",\"placeholder\":\"为Agent添加标签\"},on:{\"on-change\":_vm.onProjectChange},model:{value:(_vm.formItem.AgentTags),callback:function ($$v) {_vm.$set(_vm.formItem, \"AgentTags\", $$v)},expression:\"formItem.AgentTags\"}},_vm._l((_vm.agentTagList),function(tag){return _c('Option',{key:tag.id,attrs:{\"value\":tag.id,\"label\":tag.TagName}},[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_c('Avatar',{style:({background:tag.TagColor}),attrs:{\"shape\":\"square\",\"size\":\"small\"}})],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(tag.TagName))])])}))],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"工作目录\",\"prop\":\"AgentWorkSpace\"}},[_c('Input',{attrs:{\"placeholder\":\"任务工作目录\"},model:{value:(_vm.formItem.AgentWorkSpace),callback:function ($$v) {_vm.$set(_vm.formItem, \"AgentWorkSpace\", $$v)},expression:\"formItem.AgentWorkSpace\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"执行器数量\",\"prop\":\"Executors\"}},[_c('InputNumber',{attrs:{\"max\":20,\"min\":1,\"step\":1},model:{value:(_vm.formItem.Executors),callback:function ($$v) {_vm.$set(_vm.formItem, \"Executors\", $$v)},expression:\"formItem.Executors\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"工具目录\",\"prop\":\"BuildToolsDir\"}},[_c('Input',{attrs:{\"placeholder\":\"Agent上存放通用工具目录\"},model:{value:(_vm.formItem.BuildToolsDir),callback:function ($$v) {_vm.$set(_vm.formItem, \"BuildToolsDir\", $$v)},expression:\"formItem.BuildToolsDir\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{staticStyle:{\"width\":\"80px\",\"height\":\"30px\"},attrs:{\"type\":\"success\",\"shape\":\"circle\"},on:{\"click\":function($event){_vm.addAgent('ciAgentCreate')}}},[_vm._v(\"添加\\n        \")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"width\":\"80px\",\"height\":\"30px\"},attrs:{\"type\":\"default\",\"shape\":\"circle\"},on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)])],2),_vm._v(\" \"),_c('Drawer',{attrs:{\"value\":_vm.showAgentDetail,\"class-name\":\"fdsfds\",\"inner\":true,\"transfer\":false,\"width\":40,\"mask\":false},on:{\"on-close\":_vm.onCloseDetailPanel}},[_c('div',{attrs:{\"slot\":\"\"},slot:\"default\"}),_vm._v(\" \"),_c('Form',{ref:\"editAgent\",attrs:{\"model\":_vm.editItem,\"label-width\":80,\"rules\":_vm.ruleCustom}},[_c('FormItem',{attrs:{\"label\":\"名称\",\"prop\":\"Name\"}},[_c('Input',{attrs:{\"placeholder\":\"Agent名称20个字符以内！\"},model:{value:(_vm.editItem.Name),callback:function ($$v) {_vm.$set(_vm.editItem, \"Name\", $$v)},expression:\"editItem.Name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"标签\",\"prop\":\"AgentTags\"}},[_c('Select',{attrs:{\"multiple\":\"\",\"placeholder\":\"为Agent添加标签\"},on:{\"on-change\":_vm.onProjectChange},model:{value:(_vm.editItem.AgentTags),callback:function ($$v) {_vm.$set(_vm.editItem, \"AgentTags\", $$v)},expression:\"editItem.AgentTags\"}},_vm._l((_vm.agentTagList),function(tag){return _c('Option',{key:tag.id,attrs:{\"value\":tag.id,\"label\":tag.TagName}},[_c('span',{staticStyle:{\"margin-right\":\"10px\"}},[_c('Avatar',{style:({background:tag.TagColor}),attrs:{\"shape\":\"square\",\"size\":\"small\"}})],1),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(tag.TagName))])])}))],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"工作目录\",\"prop\":\"AgentWorkSpace\"}},[_c('Input',{attrs:{\"placeholder\":\"任务工作目录\"},model:{value:(_vm.editItem.AgentWorkSpace),callback:function ($$v) {_vm.$set(_vm.editItem, \"AgentWorkSpace\", $$v)},expression:\"editItem.AgentWorkSpace\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"执行器数量\",\"prop\":\"Executors\"}},[_c('InputNumber',{attrs:{\"max\":20,\"min\":1,\"step\":1},model:{value:(_vm.editItem.Executors),callback:function ($$v) {_vm.$set(_vm.editItem, \"Executors\", $$v)},expression:\"editItem.Executors\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"工具目录\",\"prop\":\"BuildToolsDir\"}},[_c('Input',{attrs:{\"placeholder\":\"Agent上存放通用工具目录\"},model:{value:(_vm.editItem.BuildToolsDir),callback:function ($$v) {_vm.$set(_vm.editItem, \"BuildToolsDir\", $$v)},expression:\"editItem.BuildToolsDir\"}})],1)],1),_vm._v(\" \"),_c('Button',{staticStyle:{\"width\":\"80px\",\"height\":\"30px\",\"margin-left\":\"30px\"},attrs:{\"type\":\"success\",\"shape\":\"circle\"},on:{\"click\":function($event){_vm.editAgent('editAgent')}}},[_vm._v(\"保存\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-11f023c4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/ci/settings/CIAgent.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-11f023c4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CIAgent.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CIAgent.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CIAgent.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-11f023c4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CIAgent.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-11f023c4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/ci/settings/CIAgent.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}